openapi: "3.0.0"

info:
  title: Capitol Tracker Python API
  version: "1.0"
servers:
  - url: http://localhost:9090/v1

paths:
  /_health:
    get:
      tags:
      - meta
      operationId: api.health.get
      summary: Server is up
      description: Server is up
      responses:
        200:
          description: Server is up
  /data-node:
    post:
      tags:
      - general
      operationId: api.data_node.post
      summary: Batch node upload
      description: Batch node upload
      responses:
        201:
          description: Batch created
  /event:
    post:
      tags:
      - event
      operationId: api.event.post
      summary: Create event
      description: Create new entry in event measurement
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  tags:
                    description: key value pairs of tags to add to the event
                    type: object
                  fields:
                    description: key value pairs of fields to add to the event
                    type: object
                    properties:
                      lifecycle:
                        description: 3 options - start, stop, occurred
                        type: string
                  time:
                    description: Timestamp in MM/DD/YYYY format
                    type: string
            example:
            - tags:
                name: Event name
                effect: Some way the even affected the worled
              fields:
                lifecycle: start
              time: 04/10/1993
      responses:
        201:
          description: Event created
  /event-candidate:
    post:
      tags:
      - event
      operationId: api.event.post_candidate
      summary: Create event candidate
      description: Create new entry in event_candidate measurement
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  tags:
                    description: key value pairs of tags to add to the event
                    type: object
                  fields:
                    description: key value pairs of fields to add to the event
                    type: object
                    properties:
                      lifecycle:
                        description: 3 options - start, stop, occurred
                        type: string
                  time:
                    description: Timestamp in MM/DD/YYYY format
                    type: string
            example:
            - tags:
                name: Event name
                effect: Some way the even affected the worled
              fields:
                lifecycle: start
              time: 04/10/1993
      responses:
        201:
          description: Candidate created
  /poll-data:
    get:
      tags:
      - general
      operationId: api.poll_data.search
      parameters:
        - in: query
          name: measurements
          schema:
            type: string
          description: Measurements to find
      summary: Search poll data sets
      description: Seaerch poll data tsets
      responses:
        200:
          description: Search results
  /workers/congressional-outlook/:
    post:
      tags:
      - worker
      operationId: api.workers.congressional_outlook.post
      summary: Import congressional outlook ratings
      description: Imports congressional outlook ratings to db
      responses:
        201:
          description: data set imported
  /workers/trump-approval-rating/:
    post:
      tags:
      - worker
      operationId: api.workers.trump_approval_rating.post
      summary: Import trump approval ratings
      description: Imports approval ratings to db
      responses:
        201:
          description: data set imported
